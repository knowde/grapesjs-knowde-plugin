<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GrapesJS Plugin Boilerplate</title>

  <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
  <script src="https://unpkg.com/grapesjs@0.14.52/dist/grapes.js"></script>
  <script src="dist/grapesjs-knowde-plugin.min.js"></script>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
    }
  </style>
</head>
<body>

<div id="gjs" style="height:0px; overflow:hidden">


</div>


<script type="text/javascript">
  var editor = grapesjs.init({
    height: '100%',
    showOffsets: 1,
    noticeOnUnload: 0,
    storageManager: { autoload: 1 }, // change to 0 for disable auto loading data on page load
    container: '#gjs',
    fromElement: true,

    plugins: ['grapesjs-knowde-plugin'],
    pluginsOpts: {
      'grapesjs-knowde-plugin': {
        blocks: {},
        blockCategories: {},
        labels: {},
        gridDevicesPanel: true
      }
    },
    canvas: {
      styles: [
        'https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css'
      ],
      scripts: [
        'https://code.jquery.com/jquery-3.3.1.slim.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js',
        'https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js'
      ]
    }
  });
  window.editor = editor;

  // Open Blocks Manager tab by default
  editor.Panels.getButton('views', 'open-blocks').set('active', true);
  editor.on('storage:load', e => {
    console.log('Store Loaded ', e);
  });

  // save
  editor.on('storage:store', e => {
    const components = editor.DomComponents.getComponents();
    console.log('getComponents()', components);

    console.log('Stored ...');
    // console.log('components', JSON.parse(e).styles);
  });
</script>
</body>
</html>
